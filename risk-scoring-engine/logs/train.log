2026-02-21 17:07:48,508 [INFO] ============================================================
2026-02-21 17:07:48,508 [INFO] ü§ñ Entra√Ænement du mod√®le ‚Äî AI Risk Engine
2026-02-21 17:07:48,509 [INFO] ============================================================
2026-02-21 17:07:48,530 [INFO] Donn√©es charg√©es : 458 lignes, 13 colonnes
2026-02-21 17:07:48,534 [WARNING] ‚ö†Ô∏è  Colonnes de dates absentes. Fallback : composite_risk seuill√© √† la m√©diane. Remplacez par une vraie cible d√®s que possible.
2026-02-21 17:07:48,536 [INFO] Distribution cible ‚Üí positifs : 50.7%  |  n√©gatifs : 49.3%
2026-02-21 17:07:48,542 [INFO] √âchantillons valides : 458
2026-02-21 17:07:48,545 [INFO] Train : 366 samples  |  Test : 92 samples
2026-02-21 17:07:48,546 [INFO] üîç Recherche des meilleurs hyperparam√®tres (RandomizedSearchCV)...
2026-02-21 17:07:55,325 [INFO] Meilleurs params : {'model__n_estimators': 50, 'model__min_samples_leaf': 2, 'model__max_features': 'sqrt', 'model__max_depth': None, 'model__class_weight': None}
2026-02-21 17:07:55,325 [INFO] Meilleur ROC-AUC (CV) : 1.0000
2026-02-21 17:07:55,325 [INFO] 
üìä √âvaluation du mod√®le
2026-02-21 17:07:55,753 [INFO] ROC-AUC cross-val : 1.0000 ¬± 0.0000
2026-02-21 17:07:55,794 [INFO] 
              precision    recall  f1-score   support

           0       1.00      1.00      1.00        45
           1       1.00      1.00      1.00        47

    accuracy                           1.00        92
   macro avg       1.00      1.00      1.00        92
weighted avg       1.00      1.00      1.00        92

2026-02-21 17:07:55,794 [INFO] ROC-AUC test : 1.0000
2026-02-21 17:07:55,794 [INFO] F1-score     : 1.0000
2026-02-21 17:07:56,015 [INFO] üìà Matrice de confusion ‚Üí reports\confusion_matrix.png
2026-02-21 17:07:56,149 [INFO] üìà Importance features  ‚Üí reports\feature_importance.png
2026-02-21 17:07:56,149 [INFO] 
üîù Top features :
2026-02-21 17:07:56,150 [INFO]    1. severity_num              0.6682
2026-02-21 17:07:56,150 [INFO]    2. cvss_score                0.1370
2026-02-21 17:07:56,150 [INFO]    3. tags_count                0.1081
2026-02-21 17:07:56,150 [INFO]    4. age_days                  0.0588
2026-02-21 17:07:56,150 [INFO]    5. is_active                 0.0269
2026-02-21 17:07:56,171 [INFO] üíæ Pipeline sauvegard√© ‚Üí models\pipeline_20260221_170756.pkl
2026-02-21 17:07:56,171 [INFO] üíæ Lien latest         ‚Üí models\pipeline_latest.pkl
2026-02-21 17:07:56,172 [INFO] üìã M√©tadonn√©es         ‚Üí models\pipeline_latest_meta.json
2026-02-21 17:07:56,173 [INFO] 
‚úÖ Entra√Ænement termin√© avec succ√®s.
2026-02-21 17:13:37,783 [INFO] ============================================================
2026-02-21 17:13:37,783 [INFO] ü§ñ Entra√Ænement du mod√®le ‚Äî AI Risk Engine
2026-02-21 17:13:37,783 [INFO] ============================================================
2026-02-21 17:13:37,798 [INFO] Donn√©es charg√©es : 321 lignes, 18 colonnes
2026-02-21 17:13:37,799 [INFO] Cible : 'fixed_in_30d' calcul√©e depuis 'days_to_fix'
2026-02-21 17:13:37,799 [INFO] Distribution cible ‚Üí positifs : 100.0%  |  n√©gatifs : 0.0%
2026-02-21 17:13:37,800 [INFO] √âchantillons valides : 321
2026-02-21 17:13:37,801 [INFO] Train : 256 samples  |  Test : 65 samples
2026-02-21 17:13:37,801 [INFO] üîç Recherche des meilleurs hyperparam√®tres (RandomizedSearchCV)...
2026-02-21 17:13:43,664 [INFO] Meilleurs params : {'model__n_estimators': 50, 'model__min_samples_leaf': 2, 'model__max_features': 'sqrt', 'model__max_depth': None, 'model__class_weight': None}
2026-02-21 17:13:43,664 [INFO] Meilleur ROC-AUC (CV) : nan
2026-02-21 17:13:43,664 [INFO] 
üìä √âvaluation du mod√®le
2026-02-21 17:13:44,118 [INFO] ROC-AUC cross-val : nan ¬± nan
2026-02-21 17:18:14,707 [INFO] ============================================================
2026-02-21 17:18:14,708 [INFO] Entrainement du modele ‚Äî AI Risk Engine
2026-02-21 17:18:14,708 [INFO] ============================================================
2026-02-21 17:18:14,715 [INFO] Donn√©es charg√©es : 321 lignes, 18 colonnes
2026-02-21 17:18:14,720 [INFO] Cible : fixed_in_30d depuis 'days_to_fix'
2026-02-21 17:20:11,423 [INFO] ============================================================
2026-02-21 17:20:11,423 [INFO] Entrainement du modele ‚Äî AI Risk Engine
2026-02-21 17:20:11,423 [INFO] ============================================================
2026-02-21 17:20:11,426 [INFO] Donnees chargees : 321 lignes, 18 colonnes
2026-02-21 17:20:11,426 [INFO] days_to_fix ‚Äî total: 321, valides: 321, NaN: 0
2026-02-21 17:20:11,428 [INFO]   min=0  max=0  median=0  mean=0.0
2026-02-21 17:20:11,429 [INFO]   <= 30j : 321 (100.0%)
2026-02-21 17:20:11,429 [INFO]    > 30j : 0 (0.0%)
2026-02-21 17:20:11,429 [INFO]   negatifs (date fix < date decouverte) : 0
2026-02-21 17:20:11,430 [WARNING] Seuil 30j ne produit qu'une classe (tous les findings ont days_to_fix <= 30j).
   Tentative seuil adaptatif : mediane = 0j
2026-02-21 17:20:11,431 [WARNING] Fallback strategie 2 : composite_risk > percentile 70
   (top 30%% = haut risque). Remplacez par des dates reelles.
2026-02-21 17:20:11,431 [INFO] [composite_risk > p70] positifs: 22 (6.9%) | negatifs: 299 (93.1%)
2026-02-21 17:20:11,435 [INFO] Echantillons valides : 321
2026-02-21 17:20:11,438 [INFO] Train : 256 | Test : 65
2026-02-21 17:20:11,440 [INFO] Recherche hyperparametres : StratifiedKFold k=5, n_iter=20
2026-02-21 17:20:17,182 [INFO] Meilleurs params : {'model__n_estimators': 50, 'model__min_samples_leaf': 2, 'model__max_features': 'sqrt', 'model__max_depth': None, 'model__class_weight': None}
2026-02-21 17:20:17,182 [INFO] Meilleur F1 (CV) : 1.0000
2026-02-21 17:20:17,182 [INFO] 
Evaluation du modele
2026-02-21 17:20:17,577 [INFO] F1 cross-val : 1.0000 +/- 0.0000
2026-02-21 17:20:17,600 [INFO] 
              precision    recall  f1-score   support

           0       1.00      1.00      1.00        61
           1       1.00      1.00      1.00         4

    accuracy                           1.00        65
   macro avg       1.00      1.00      1.00        65
weighted avg       1.00      1.00      1.00        65

2026-02-21 17:20:17,600 [INFO] F1-score test : 1.0000
2026-02-21 17:20:17,620 [INFO] ROC-AUC test  : 1.0000
2026-02-21 17:20:17,761 [INFO] Matrice de confusion -> reports\confusion_matrix.png
2026-02-21 17:20:17,880 [INFO] Importance features -> reports\feature_importance.png
2026-02-21 17:20:17,881 [INFO] 
Top 5 features :
2026-02-21 17:20:17,881 [INFO]    1. tags_count                0.4838
2026-02-21 17:20:17,881 [INFO]    2. cvss_score                0.4665
2026-02-21 17:20:17,881 [INFO]    3. age_days                  0.0254
2026-02-21 17:20:17,881 [INFO]    4. severity_num              0.0164
2026-02-21 17:20:17,881 [INFO]    5. is_active                 0.0079
2026-02-21 17:20:17,902 [INFO] Pipeline sauvegarde -> models\pipeline_20260221_172017.pkl
2026-02-21 17:20:17,902 [INFO] Lien latest         -> models\pipeline_latest.pkl
2026-02-21 17:20:17,903 [INFO] Metadonnees         -> models\pipeline_latest_meta.json
2026-02-21 17:20:17,903 [INFO] 
Entrainement termine avec succes.
